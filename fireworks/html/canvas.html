<!DOCTYPE html>

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Canvas test</title>
	<meta name="author" content="James Bull">
    <script type="text/javascript" src="../src/jim.js"></script>
	<script type="text/javascript" src="../src/shapes/shapes.js"></script>
	<script type="text/javascript" src="../src/gradient.js"></script>
	<script type="text/javascript" src="../src/shapes/colour.js"></script>
    <script type="text/javascript" src="../src/movement/upAndDown.js"></script>
    <script type="text/javascript" src="../src/display/Renderer.js"></script>
	<script type="text/javascript" src="../lib/jquery1.7.js"></script>
</head>
<body>
	<H1>An example</H1>
	<canvas id="mainCanvas" width="500" height="500" style="background-color: #000;">

	</canvas>
	<script type="text/javascript">
        var canvasElement = $('#mainCanvas')[0],
            renderer = jim.display.renderer.create(canvasElement),
            initialForce = jim.movement.force.create({magnitude:0.0025, direction : 80, name: "initial"}),
            gravity = jim.movement.force.create({magnitude:0.002, direction : 270, name: "gravity"}),
            rCol = function () {
                return Math.random() * 256;
            },
            forceResolver = jim.movement.forceResolver2.create(),
            createCircleOfRandomLocationAndColour = function (event) {
                var c = jim.colour.create(rCol(),rCol(),rCol(),255);
                var circle = jim.circle.create(50, c, forceResolver, 10000);
                circle.x = Math.random()*500;
                circle.y = 50;
                renderer.add(circle);
                forceResolver.addForce(initialForce);
            },
            removeInitialForce = function (event) {
                forceResolver.removeForce(initialForce);
            };
        forceResolver.addForce(gravity);

        canvasElement.addEventListener("mousedown", createCircleOfRandomLocationAndColour, false);
        canvasElement.addEventListener("mouseup", removeInitialForce, false);
        renderer.beginRenderLoop();
	</script>
</body>
</html>


